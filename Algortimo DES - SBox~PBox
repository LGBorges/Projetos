/*Funções não finaizadas*/


#include <stdio.h>
#include <stdlib.h>
#include <conio.h>
#include <locale.h>

int CaixaS1();
int CaixaP();
void delay(int a);

int main()
{
	setlocale(LC_ALL, "Portuguese");
	int opcaoMenu;
	do{
		printf(
		"\n\t|----------------------------|"
		"\n\t|Leônidas Gomes Borges|"
		"\n\t|Aplicações e Serviços da WEB|"
		"\n\t|----------------------------|");
		printf("\n\n\tAlgortimo de Criptografia DES"
		"\nEscolha sua função:"
		"\n1 - Caixa S1."
		"\n2 - Caixa P."
		"\n3 - Sair."
		"\nEscolha: ");
		scanf("%d", &opcaoMenu);
		system("cls");
		switch(opcaoMenu)
		{
			case 1:
				CaixaS1();
			break;
			case 2:
				CaixaP();
			break;
			case 3:
				printf("\t\tFinalizando programa...");
				exit(0);
				getch();
			break;
			default:
				printf("Opção inválida!\n\n");
				system("pause");
				system("cls");
			break;
		}
	}while(opcaoMenu != 3);
	return 0;
}

int CaixaS1()
{
	int S1Box[4][16] = {{00,01,10,11},
	{0000,0001,0010,0011,0100,0101,0110,0111,1000,1001,1010,1011,1100,1101,1110,1111}};
	int Tabela1[4][16] = {{14,4,13,1,2,15,11,8,3,10,6,12,5,9,0,7},
					   	 {0,15,7,4,14,2,13,1,10,6,12,11,9,5,3,8},
					   	 {4,1,14,8,13,6,2,11,15,12,9,7,3,10,5,0},
					   	 {15,12,8,2,4,9,1,7,5,11,3,14,10,0,6,13}};
					   	 
	int Tabela2[4][16] = {{1110,0100,1101,0001,0010,1111,1011,1000,0011,1010,0110,1100,0101,1001,0000,0111},
					   	  {0000,1111,0111,0100,1110,0010,1101,0001,1010,0110,1100,1011,1001,0101,0011,1000},
					   	  {0100,0001,1110,1000,1101,0110,0010,1011,1111,1100,1001,0111,0011,1010,0101,0000},
					   	  {1111,1100,1000,0010,0100,1001,0001,0111,0101,1011,0011,1110,1010,0000,0110,1101}};
	
	int  i, j, novaTabela[i][j];
	
	printf("\tCaixa S1\n\n");
	printf("Digite os bits da linha: ");
	scanf("%i", &novaTabela[i][j]);
	printf("Digite os bits da coluna: ");
	scanf("%i", &novaTabela[i][j]);
	for(i = 0; i <= 4; i++){
		for(j = 0; j <= 16; j++){
			if(novaTabela[i][j] == Tabela1[i][j] && novaTabela[i][j] == S1Box[i][j])
				novaTabela[i][j] = Tabela1[i][j] && S1Box[i][j];
		}
	}
	printf("--------------------------------------");
	printf("\n\tTabela[%i][%i]: %i%i\n", i, j, novaTabela[i][j]);
	printf("--------------------------------------");
	printf("\n\n");
	system("pause");
	system("cls");
}

int CaixaP(){
	int i;
	int caixaP[32] = {16,7,20,21,29,12,28,17,1,15,23,26,5,18,31,10,2,8,24,14,32,27,3,9,19,13,30,6,22,11,4,25};
	int inicio = caixaP[0];
	int ultimo = caixaP[32];
		
	printf("\tCaixa P\n\n"
	"--------------------------------------\n"
	"\tDeslocando bits...\n"
	"--------------------------------------\n");
	delay(5);
	printf("\tCaixa P deslocada:\n");
	for(i=0;i<=ultimo;i++){
		inicio--;
		ultimo += inicio;
		printf("\t       %i\n", ultimo);
	}
	printf("--------------------------------------\n"
	"\tBits deslocados!\n"
	"--------------------------------------\n");
	printf("\n\n");
	system("pause");
	system("cls");
}

void delay(int a)
{
	int add, time, i;
	
	time = a * 1000000000000000;
	for(i=0;i<time;i++){
		add*=1;
		add++;
		add++;
	}
}
